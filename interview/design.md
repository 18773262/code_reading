## 基本理论

### 软件设计文档

- 需求分析
- 概要设计
- 详细设计

## 短 URL 生成器设计

### 需求分析

- 功能需求
  - 生成唯一的短 URL
  - 将请求重定向到原始长 URL
  - 后台检索，可管理
  - 有效期2年，自动清理
- 性能指标估算
  - 存储空间
  - 吞吐量，高峰期*2
  - 网络带宽
    - 单位为Mb，注意要*8bit
- 其余需求
  - 高可用
  - 高性能
  - URL不可猜测

### 概要设计

- 算法
  - 单项散列函数生成短 URL
    - 冲突后再散列计算
  - 自增长短 UR
    - 可猜测
  - 预生成短 URL
- 整体部署
  - 访问集群
    - 缓存Redis
    - 映射Hbase
  - 预加载集群
  - 预生成集群
  - 清理集群

### 详细设计

- 重定向响应码
  - 301 永久重定向
  - 302 临时重定向
- 短 URL 预生成文件及预加载
- URL Base64 编码
  - URL 保留字符编码表