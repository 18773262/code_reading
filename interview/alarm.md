## 设计一个高效的告警系统

### 三个核心指标

- 信噪比
- 覆盖率
- 转交率

### 行动案例

1. 强调问题，提高所有人的重视度
2. 通过统计数据，做一个服务的告警排名，公开发布
3. 两个原则：
   1. 相信工程师，自己负责
   2. 分级机制，避免疲劳
4. 告警系统自身的问题

## 苏宁基于知识图谱的告警收敛和根因定位实践

### CMDB 数据

- IP地址
- 软件类型与名称
- 系统英文名
- 环境
- 宿主机IP
- 服务实例名称

### 告警流程

1. 设置时间切片粒度
2. 告警分类
   1. HOST
   2. VM
   3. SOFTWARE
3. 告警收敛
4. 因果图构建
5. 根因路径

## 智能监控运维在爱奇艺视频播放系统中的实践

### 数控应用层

- 报表监控
  - 监控大盘
  - 扩容建议
  - 容量治理
- 告警自愈
  - 故障快照
- 多维监控和分析
- 日志查询
  - 链路分析
- 硬件报修

### 规则引擎 VS 异常检测

- 规则引擎 - 规则明确，维度低
- 异常检测
  - 均值漂移
    - 相邻两个窗口的比例
    - 上下阈值，包括幅度、基数
    - 不适合周期性的指标
  - 流式直方图
    - 缓慢变化
    - 周期性变化

### 链路

- 标准化 - 数据接入SLA
- 联动化 - 变更监控运维
- 服务化
  - 资源评估
  - 扩容建议
  - 值班
  - 知识库
- 智能化
  - 检测分析自愈

## 工具革命—以平台化推进 AIOps 在腾讯 IEG 普及落地

### 链路

- 异常发现
  - 单指标
  - 预测
- 故障诊断
  - 指标关联
  - 指标事件关联
  - 故障定位
- 故障处理
  - 运维操作推荐
- 跟踪
  - 工单流程

### 核心数据与应用

- 指标数据 - 指标
  - 异常检测
- 配置数据 - CMDB
  - 关联分析
- 时间数据 - 变更事件
  - 根因定位

### AIOps核心价值

- 质量
- 效率
- 成本
- 安全
- 运营支撑

运维AI工程师 - 自定义建模

## 通用化智能告警收敛解决方案——机器学习应用

### 核心链路

- 告警事件输入
  - 维度信息：key-value
  - 告警数据定义
  - 告警时间粒度：重要和紧急程度，决定收敛时间
- 告警聚类收敛
  - 指定收敛字段
    - 数据预处理，如特殊符号
    - 分层收敛
      - 通配符
      - 分隔符：计算相似度
      - 文本匹配：计算相似度
    - 模板归类
- 告警事件输出
  - 统一标识
  - 收敛依据
  - 收敛维度：对维度进行处理，或合并，或丢弃
  - 新增维度：如计数

### 告警的复盘分析

- 时间
- 事件
- 统计量
- 维度
- 相似度
- 环比